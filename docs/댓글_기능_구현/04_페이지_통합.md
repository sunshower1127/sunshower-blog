# Phase 4: ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ í˜ì´ì§€ í†µí•©

ìƒì„±í•œ giscus ì»´í¬ë„ŒíŠ¸ë¥¼ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ í˜ì´ì§€ì— ì¶”ê°€í•©ë‹ˆë‹¤.

## ìˆ˜ì •í•  íŒŒì¼

**íŒŒì¼ ê²½ë¡œ**: `src/pages/post/[...slug].astro`

ì´ íŒŒì¼ì€ ëª¨ë“  ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” Astro ë™ì  ë¼ìš°íŒ… íŒŒì¼ì…ë‹ˆë‹¤.

---

## í˜„ì¬ ìƒíƒœ

### Import ì„¹ì…˜ (lines 10-11)
```astro
import Disqus from '@/components/Disqus'
import { disqusConfig } from '@/data/disqus.config'
```

### ë³€ìˆ˜ ì„ ì–¸ (line 38)
```astro
const disqusEnabled = disqusConfig.enabled
```

### ë Œë”ë§ (line 70)
```astro
{disqusEnabled && <Disqus />}
```

---

## ë³€ê²½ ì‚¬í•­

### ì˜µì…˜ 1: Disqus ì™„ì „ ëŒ€ì²´ (ê¶Œì¥)

Disqusë¥¼ ì œê±°í•˜ê³  giscusë¡œ ì™„ì „íˆ êµì²´í•©ë‹ˆë‹¤.

#### Step 1: Import ìˆ˜ì • (lines 10-11)

**ë³€ê²½ ì „**:
```astro
import Disqus from '@/components/Disqus'
import { disqusConfig } from '@/data/disqus.config'
```

**ë³€ê²½ í›„**:
```astro
import Giscus from '@/components/Giscus'
import { giscusConfig } from '@/data/giscus.config'
```

#### Step 2: ë³€ìˆ˜ ìˆ˜ì • (line 38)

**ë³€ê²½ ì „**:
```astro
const disqusEnabled = disqusConfig.enabled
```

**ë³€ê²½ í›„**:
```astro
const giscusEnabled = giscusConfig.enabled
```

#### Step 3: ë Œë”ë§ ìˆ˜ì • (line 70)

**ë³€ê²½ ì „**:
```astro
{disqusEnabled && <Disqus />}
```

**ë³€ê²½ í›„**:
```astro
{giscusEnabled && <Giscus />}
```

---

### ì˜µì…˜ 2: ë³‘í–‰ ì‚¬ìš© (ì„ íƒ ì‚¬í•­)

Disqusì™€ giscusë¥¼ í•¨ê»˜ ìœ ì§€í•˜ê³  ì„¤ì •ìœ¼ë¡œ ì „í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

#### Import ì¶”ê°€ (lines 10-11 ë’¤ì— ì¶”ê°€)
```astro
import Disqus from '@/components/Disqus'
import { disqusConfig } from '@/data/disqus.config'
import Giscus from '@/components/Giscus'
import { giscusConfig } from '@/data/giscus.config'
```

#### ë³€ìˆ˜ ì¶”ê°€ (line 38 ë’¤ì— ì¶”ê°€)
```astro
const disqusEnabled = disqusConfig.enabled
const giscusEnabled = giscusConfig.enabled
```

#### ë Œë”ë§ ìˆ˜ì • (line 70)
```astro
{disqusEnabled && <Disqus />}
{giscusEnabled && <Giscus />}
```

âš ï¸ **ì£¼ì˜**: ë‘ ëŒ“ê¸€ ì‹œìŠ¤í…œì„ ë™ì‹œì— `enabled: true`ë¡œ ì„¤ì •í•˜ë©´ ë‘˜ ë‹¤ í‘œì‹œë©ë‹ˆë‹¤. í•˜ë‚˜ë§Œ í™œì„±í™”í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## ê¶Œì¥: ì˜µì…˜ 1 (ì™„ì „ ëŒ€ì²´)

### ì´ìœ 
1. **ì½”ë“œ ê°„ê²°ì„±**: ë¶ˆí•„ìš”í•œ import ì œê±°
2. **ìœ ì§€ë³´ìˆ˜**: í•˜ë‚˜ì˜ ëŒ“ê¸€ ì‹œìŠ¤í…œë§Œ ê´€ë¦¬
3. **ì‚¬ìš©ì ê²½í—˜**: ëŒ“ê¸€ì´ ì¤‘ë³µ í‘œì‹œë˜ì§€ ì•ŠìŒ
4. **ë¡¤ë°± ê°€ëŠ¥**: Disqus íŒŒì¼ì€ ìœ ì§€ë˜ë¯€ë¡œ í•„ìš”ì‹œ ë‹¤ì‹œ ì¶”ê°€ ê°€ëŠ¥

### Disqus íŒŒì¼ ìœ ì§€
- `src/components/Disqus.astro` - ì‚­ì œí•˜ì§€ ë§ê³  ìœ ì§€
- `src/data/disqus.config.ts` - ì‚­ì œí•˜ì§€ ë§ê³  ìœ ì§€
- ë‚˜ì¤‘ì— ë‹¤ì‹œ giscusì—ì„œ Disqusë¡œ ì „í™˜í•  ìˆ˜ ìˆìŒ

---

## ìˆ˜ì • í›„ ì „ì²´ ì½”ë“œ (ì£¼ìš” ë¶€ë¶„)

```astro
---
import { type CollectionEntry, getCollection } from 'astro:content'
import BlogPost from '@/layouts/BlogPost'
import Code from '@/components/mdx/Code'
import ListRelatedPosts from '@/components/ListRelatedPosts'
import Share from '@/components/Share'
import TableOfContents from '@/components/TableOfContents'
import { getPosts } from '@/utils'
import SButton from '@/components/mdx/SButton'
import Giscus from '@/components/Giscus'
import { giscusConfig } from '@/data/giscus.config'

const posts = await getCollection('blog')
export async function getStaticPaths() {
  const posts = await getPosts()

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post
  }))
}
type Props = CollectionEntry<'blog'>

const post = Astro.props
const MAX_POSTS = 3
const getRelatedPosts = (post: Props) => {
  const lowercaseTags = post.data.tags.map((tag) => tag.toLowerCase())
  const relatedPosts = posts.filter(
    (p) => p.slug !== post.slug && p.data.tags.some((t) => lowercaseTags.includes(t.toLowerCase()))
  )
  return relatedPosts.slice(0, MAX_POSTS)
}

const relatedPosts = getRelatedPosts(post)

const { Content, headings, remarkPluginFrontmatter } = await post.render()

const giscusEnabled = giscusConfig.enabled
---

<BlogPost
  id={post.id}
  data={post.data}
  headings={headings}
  readTime={remarkPluginFrontmatter.minutesRead}
>
  <div class='grid grid-cols-1 md:grid-cols-[20%_auto] gap-10 mt-8'>
    <!-- aside  -->
    <aside class='md:flex flex-col gap-8 hidden'>
      <Share />
      <div class='sticky top-24 self-start hidden md:block transition-all duration-200'>
        {headings && headings.length > 0 && <TableOfContents {headings} />}
      </div>
    </aside>

    <!-- post -->
    <article class='max-w-full w-full'>
      <div class='prose prose-lg md:prose-xl dark:prose-invert mb-12 min-w-full'>
        <Content components={{ pre: Code, SButton }} />
      </div>

      <!-- related posts -->
      <footer>
        <h2 class='font-bold text-lg dark:text-white mb-6'>Related Posts</h2>
        <ListRelatedPosts posts={relatedPosts} />
      </footer>
    </article>
  </div>

  {giscusEnabled && <Giscus />}
</BlogPost>
```

---

## ìˆ˜ì • ìœ„ì¹˜ ìš”ì•½

| ì¤„ ë²ˆí˜¸ | ë‚´ìš© | ë³€ê²½ |
|---------|------|------|
| 10-11 | Import | Disqus â†’ Giscus |
| 38 | ë³€ìˆ˜ ì„ ì–¸ | disqusEnabled â†’ giscusEnabled |
| 70 | ë Œë”ë§ | Disqus â†’ Giscus |

---

## í†µí•© ìœ„ì¹˜ ì„¤ëª…

```astro
</BlogPost>ì˜ ë‹«ëŠ” íƒœê·¸ ë°”ë¡œ ì „ì— ìœ„ì¹˜
      </footer>
    </article>
  </div>

  {giscusEnabled && <Giscus />}  â† ì—¬ê¸°!
</BlogPost>
```

- **Related Posts ì•„ë˜**: í¬ìŠ¤íŠ¸ ë‚´ìš©ê³¼ ê´€ë ¨ í¬ìŠ¤íŠ¸ê°€ ëª¨ë‘ ëë‚œ í›„
- **BlogPost ë ˆì´ì•„ì›ƒ ë‚´ë¶€**: ë ˆì´ì•„ì›ƒì˜ ì¼ë¶€ë¡œ í¬í•¨
- **ì¡°ê±´ë¶€ ë Œë”ë§**: `giscusEnabled`ê°€ `true`ì¼ ë•Œë§Œ í‘œì‹œ

---

## íŒŒì¼ êµ¬ì¡° í™•ì¸

ìˆ˜ì • í›„ ë‹¤ìŒ íŒŒì¼ë“¤ì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤:

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Giscus.astro          â† ìƒˆë¡œ ìƒì„±
â”‚   â””â”€â”€ Disqus.astro          â† ìœ ì§€ (ì‚¬ìš© ì•ˆ í•¨)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ giscus.config.ts      â† ìƒˆë¡œ ìƒì„±
â”‚   â””â”€â”€ disqus.config.ts      â† ìœ ì§€ (enabled: false)
â””â”€â”€ pages/
    â””â”€â”€ post/
        â””â”€â”€ [...slug].astro   â† ìˆ˜ì •ë¨
```

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `[...slug].astro` íŒŒì¼ ì—´ê¸°
- [ ] Import ìˆ˜ì • (lines 10-11)
- [ ] ë³€ìˆ˜ ìˆ˜ì • (line 38)
- [ ] ë Œë”ë§ ìˆ˜ì • (line 70)
- [ ] íŒŒì¼ ì €ì¥

---

## ë‹¤ìŒ ë‹¨ê³„
ğŸ“„ [05_í…ŒìŠ¤íŠ¸_ë°_ê²€ì¦.md](./05_í…ŒìŠ¤íŠ¸_ë°_ê²€ì¦.md) - ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë° í”„ë¡œë•ì…˜ ë°°í¬
